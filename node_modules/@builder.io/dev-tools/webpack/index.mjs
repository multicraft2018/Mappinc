var yt=Object.create;var be=Object.defineProperty;var wt=Object.getOwnPropertyDescriptor;var Tt=Object.getOwnPropertyNames;var zt=Object.getPrototypeOf,Ct=Object.prototype.hasOwnProperty;var j=(u,e)=>()=>(e||u((e={exports:{}}).exports,e),e.exports);var qt=(u,e,t,s)=>{if(e&&typeof e=="object"||typeof e=="function")for(let n of Tt(e))!Ct.call(u,n)&&n!==t&&be(u,n,{get:()=>e[n],enumerable:!(s=wt(e,n))||s.enumerable});return u};var Et=(u,e,t)=>(t=u!=null?yt(zt(u)):{},qt(e||!u||!u.__esModule?be(t,"default",{value:u,enumerable:!0}):t,u));var V=j((Vs,ye)=>{"use strict";var le=class{source(){throw new Error("Abstract")}buffer(){let e=this.source();return Buffer.isBuffer(e)?e:Buffer.from(e,"utf-8")}size(){return this.buffer().length}map(e){return null}sourceAndMap(e){return{source:this.source(),map:this.map(e)}}updateHash(e){throw new Error("Abstract")}};ye.exports=le});var re=j((Ws,we)=>{"use strict";var Nt=`
`.charCodeAt(0),jt=u=>{if(u===void 0)return{};let e=u.lastIndexOf(`
`);if(e===-1)return{generatedLine:1,generatedColumn:u.length,source:u};let t=2;for(let s=0;s<e;s++)u.charCodeAt(s)===Nt&&t++;return{generatedLine:t,generatedColumn:u.length-e-1,source:u}};we.exports=jt});var X=j((Us,Te)=>{var xt=u=>{let e=[],t=u.length,s=0;for(;s<t;)if(u.charCodeAt(s)===10)e.push(`
`),s++;else{let r=s+1;for(;r<t&&u.charCodeAt(r)!==10;)r++;e.push(u.slice(s,r+1)),s=r+1}return e};Te.exports=xt});var ne=j((Fs,ze)=>{"use strict";var It=re(),kt=X(),Dt=(u,e,t,s)=>{let n=1,r=kt(u),f;for(f of r)e(f,n,0,-1,-1,-1,-1),n++;return r.length===0||f.endsWith(`
`)?{generatedLine:r.length+1,generatedColumn:0}:{generatedLine:r.length,generatedColumn:f.length}};ze.exports=(u,e,t,s,n)=>n?It(u):Dt(u,e,t,s)});var ie=j((Js,Ce)=>{"use strict";var Lt=ne(),Ht=V(),ae=class extends Ht{constructor(e,t=!1){super();let s=Buffer.isBuffer(e);if(!s&&typeof e!="string")throw new TypeError("argument 'value' must be either string of Buffer");this._valueIsBuffer=!t&&s,this._value=t&&s?void 0:e,this._valueAsBuffer=s?e:void 0,this._valueAsString=s?void 0:e}isBuffer(){return this._valueIsBuffer}source(){return this._value===void 0&&(this._value=this._valueAsBuffer.toString("utf-8")),this._value}buffer(){return this._valueAsBuffer===void 0&&(this._valueAsBuffer=Buffer.from(this._value,"utf-8")),this._valueAsBuffer}map(e){return null}streamChunks(e,t,s,n){return this._value===void 0&&(this._value=Buffer.from(this._valueAsBuffer,"utf-8")),this._valueAsString===void 0&&(this._valueAsString=typeof this._value=="string"?this._value:this._value.toString("utf-8")),Lt(this._valueAsString,t,s,n,!!(e&&e.finalSource))}updateHash(e){this._valueAsBuffer===void 0&&(this._valueAsBuffer=Buffer.from(this._value,"utf-8")),e.update("RawSource"),e.update(this._valueAsBuffer)}};Ce.exports=ae});var he=j((Xs,Ee)=>{"use strict";var ue="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split(""),qe=32,Rt=u=>u&&u.columns===!1?Gt():Pt(),Pt=()=>{let u=1,e=0,t=0,s=1,n=0,r=0,f=!1,i=!1,d=!0;return(c,a,o,h,g,l)=>{if(f&&u===c){if(o===t&&h===s&&g===n&&!i&&l<0)return""}else if(o<0)return"";let _;u<c?(_=";".repeat(c-u),u=c,e=0,d=!1):d?(_="",d=!1):_=",";let S=A=>{let y=A>>>31&1,b=A>>31,w=(A+b^b)<<1|y;for(;;){let p=w&31;if(w>>=5,w===0){_+=ue[p];break}else _+=ue[p|qe]}};return S(a-e),e=a,o>=0?(f=!0,o===t?_+="A":(S(o-t),t=o),S(h-s),s=h,g===n?_+="A":(S(g-n),n=g),l>=0?(S(l-r),r=l,i=!0):i=!1):f=!1,_}},Gt=()=>{let u=0,e=1,t=0,s=1;return(n,r,f,i,d,c)=>{if(f<0||u===n)return"";let a,o=h=>{let g=h>>>31&1,l=h>>31,S=(h+l^l)<<1|g;for(;;){let A=S&31;if(S>>=5,S===0){a+=ue[A];break}else a+=ue[A|qe]}};return u=n,n===e+1?(e=n,f===t?(t=f,i===s+1?(s=i,";AACA"):(a=";AA",o(i-s),s=i,a+"A")):(a=";A",o(f-t),t=f,o(i-s),s=i,a+"A")):(a=";".repeat(n-e),e=n,f===t?(t=f,i===s+1?(s=i,a+"AACA"):(a+="AA",o(i-s),s=i,a+"A")):(a+="A",o(f-t),t=f,o(i-s),s=i,a+"A"))}};Ee.exports=Rt});var $=j(de=>{"use strict";var Ne=he();de.getSourceAndMap=(u,e)=>{let t="",s="",n=[],r=[],f=[],i=Ne(e),{source:d}=u.streamChunks(Object.assign({},e,{finalSource:!0}),(c,a,o,h,g,l,_)=>{c!==void 0&&(t+=c),s+=i(a,o,h,g,l,_)},(c,a,o)=>{for(;n.length<c;)n.push(null);if(n[c]=a,o!==void 0){for(;r.length<c;)r.push(null);r[c]=o}},(c,a)=>{for(;f.length<c;)f.push(null);f[c]=a});return{source:d!==void 0?d:t,map:s.length>0?{version:3,file:"x",mappings:s,sources:n,sourcesContent:r.length>0?r:void 0,names:f}:null}};de.getMap=(u,e)=>{let t="",s=[],n=[],r=[],f=Ne(e);return u.streamChunks(Object.assign({},e,{source:!1,finalSource:!0}),(i,d,c,a,o,h,g)=>{t+=f(d,c,a,o,h,g)},(i,d,c)=>{for(;s.length<i;)s.push(null);if(s[i]=d,c!==void 0){for(;n.length<i;)n.push(null);n[i]=c}},(i,d)=>{for(;r.length<i;)r.push(null);r[i]=d}),t.length>0?{version:3,file:"x",mappings:t,sources:s,sourcesContent:n.length>0?n:void 0,names:r}:null}});var xe=j((Ks,je)=>{var Vt=u=>{let e=u.length;if(e===0)return null;let t=[],s=0;for(;s<e;){let n=s;e:{let r=u.charCodeAt(s);for(;r!==10&&r!==59&&r!==123&&r!==125;){if(++s>=e)break e;r=u.charCodeAt(s)}for(;r===59||r===32||r===123||r===125||r===13||r===9;){if(++s>=e)break e;r=u.charCodeAt(s)}r===10&&s++}t.push(u.slice(n,s))}return t};je.exports=Vt});var ke=j((Qs,Ie)=>{"use strict";var{getMap:Wt,getSourceAndMap:Ut}=$(),Ft=X(),Jt=re(),Xt=V(),$t=xe(),pe=class extends Xt{constructor(e,t){super();let s=Buffer.isBuffer(e);this._value=s?void 0:e,this._valueAsBuffer=s?e:void 0,this._name=t}getName(){return this._name}source(){return this._value===void 0&&(this._value=this._valueAsBuffer.toString("utf-8")),this._value}buffer(){return this._valueAsBuffer===void 0&&(this._valueAsBuffer=Buffer.from(this._value,"utf-8")),this._valueAsBuffer}map(e){return Wt(this,e)}sourceAndMap(e){return Ut(this,e)}streamChunks(e,t,s,n){this._value===void 0&&(this._value=this._valueAsBuffer.toString("utf-8")),s(0,this._name,this._value);let r=!!(e&&e.finalSource);if(!e||e.columns!==!1){let f=$t(this._value),i=1,d=0;if(f!==null)for(let c of f){let a=c.endsWith(`
`);a&&c.length===1?r||t(c,i,d,-1,-1,-1,-1):t(r?void 0:c,i,d,0,i,d,-1),a?(i++,d=0):d+=c.length}return{generatedLine:i,generatedColumn:d,source:r?this._value:void 0}}else if(r){let f=Jt(this._value),{generatedLine:i,generatedColumn:d}=f;if(d===0)for(let c=1;c<i;c++)t(void 0,c,0,0,c,0,-1);else for(let c=1;c<=i;c++)t(void 0,c,0,0,c,0,-1);return f}else{let f=1,i=Ft(this._value),d;for(d of i)t(r?void 0:d,f,0,0,f,0,-1),f++;return i.length===0||d.endsWith(`
`)?{generatedLine:i.length+1,generatedColumn:0,source:r?this._value:void 0}:{generatedLine:i.length,generatedColumn:d.length,source:r?this._value:void 0}}}updateHash(e){this._valueAsBuffer===void 0&&(this._valueAsBuffer=Buffer.from(this._value,"utf-8")),e.update("OriginalSource"),e.update(this._valueAsBuffer),e.update(this._name||"")}};Ie.exports=pe});var Le=j((Ys,De)=>{"use strict";var Kt=(u,e)=>{if(e<0)return null;let{sourceRoot:t,sources:s}=u,n=s[e];return t?t.endsWith("/")?t+n:t+"/"+n:n};De.exports=Kt});var Pe=j((Zs,Re)=>{"use strict";var He="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",K=new Uint8Array("z".charCodeAt(0)+1);{K.fill(66);for(let u=0;u<He.length;u++)K[He.charCodeAt(u)]=u;K[",".charCodeAt(0)]=64,K[";".charCodeAt(0)]=65}var Qt=K.length-1,Yt=(u,e)=>{let t=new Uint32Array([0,0,1,0,0]),s=0,n=0,r=0,f=1,i=-1;for(let d=0;d<u.length;d++){let c=u.charCodeAt(d);if(c>Qt)continue;let a=K[c];if(a&64)t[0]>i&&(s===1?e(f,t[0],-1,-1,-1,-1):s===4?e(f,t[0],t[1],t[2],t[3],-1):s===5&&e(f,t[0],t[1],t[2],t[3],t[4]),i=t[0]),s=0,a===65&&(f++,t[0]=0,i=-1);else if(a&32)n|=(a&31)<<r,r+=5;else{n|=a<<r;let o=n&1?-(n>>1):n>>1;t[s++]+=o,r=0,n=0}}s===1?e(f,t[0],-1,-1,-1,-1):s===4?e(f,t[0],t[1],t[2],t[3],-1):s===5&&e(f,t[0],t[1],t[2],t[3],t[4])};Re.exports=Yt});var Q=j((er,We)=>{"use strict";var Ge=re(),fe=Le(),ce=Pe(),Ve=X(),Zt=(u,e,t,s,n)=>{let r=Ve(u);if(r.length===0)return{generatedLine:1,generatedColumn:0};let{sources:f,sourcesContent:i,names:d,mappings:c}=e;for(let p=0;p<f.length;p++)s(p,fe(e,p),i&&i[p]||void 0);if(d)for(let p=0;p<d.length;p++)n(p,d[p]);let a=r[r.length-1],o=a.endsWith(`
`),h=o?r.length+1:r.length,g=o?0:a.length,l=1,_=0,S=!1,A=-1,y=-1,b=-1,M=-1,w=(p,O,E,T,v,z)=>{if(S&&l<=r.length){let m,B=l,N=_,q=r[l-1];p!==l?(m=q.slice(_),l++,_=0):(m=q.slice(_,O),_=O),m&&t(m,B,N,A,y,b,M),S=!1}if(p>l&&_>0){if(l<=r.length){let m=r[l-1].slice(_);t(m,l,_,-1,-1,-1,-1)}l++,_=0}for(;p>l;)l<=r.length&&t(r[l-1],l,0,-1,-1,-1,-1),l++;if(O>_){if(l<=r.length){let m=r[l-1].slice(_,O);t(m,l,_,-1,-1,-1,-1)}_=O}E>=0&&(p<h||p===h&&O<g)&&(S=!0,A=E,y=T,b=v,M=z)};return ce(c,w),w(h,g,-1,-1,-1,-1),{generatedLine:h,generatedColumn:g}},es=(u,e,t,s,n)=>{let r=Ve(u);if(r.length===0)return{generatedLine:1,generatedColumn:0};let{sources:f,sourcesContent:i,mappings:d}=e;for(let _=0;_<f.length;_++)s(_,fe(e,_),i&&i[_]||void 0);let c=1;for(ce(d,(_,S,A,y,b,M)=>{if(!(A<0||_<c||_>r.length)){for(;_>c;)c<=r.length&&t(r[c-1],c,0,-1,-1,-1,-1),c++;_<=r.length&&(t(r[_-1],_,0,A,y,b,-1),c++)}});c<=r.length;c++)t(r[c-1],c,0,-1,-1,-1,-1);let o=r[r.length-1],h=o.endsWith(`
`),g=h?r.length+1:r.length,l=h?0:o.length;return{generatedLine:g,generatedColumn:l}},ts=(u,e,t,s,n)=>{let r=Ge(u),{generatedLine:f,generatedColumn:i}=r;if(f===1&&i===0)return r;let{sources:d,sourcesContent:c,names:a,mappings:o}=e;for(let l=0;l<d.length;l++)s(l,fe(e,l),c&&c[l]||void 0);if(a)for(let l=0;l<a.length;l++)n(l,a[l]);let h=0;return ce(o,(l,_,S,A,y,b)=>{l>=f&&(_>=i||l>f)||(S>=0?(t(void 0,l,_,S,A,y,b),h=l):h===l&&(t(void 0,l,_,-1,-1,-1,-1),h=0))}),r},ss=(u,e,t,s,n)=>{let r=Ge(u),{generatedLine:f,generatedColumn:i}=r;if(f===1&&i===0)return{generatedLine:1,generatedColumn:0};let{sources:d,sourcesContent:c,mappings:a}=e;for(let l=0;l<d.length;l++)s(l,fe(e,l),c&&c[l]||void 0);let o=i===0?f-1:f,h=1;return ce(a,(l,_,S,A,y,b)=>{S>=0&&h<=l&&l<=o&&(t(void 0,l,0,S,A,y,-1),h=l+1)}),r};We.exports=(u,e,t,s,n,r,f)=>f?r?ts(u,e,t,s,n):Zt(u,e,t,s,n):r?ss(u,e,t,s,n):es(u,e,t,s,n)});var Xe=j((tr,Je)=>{"use strict";var Ue=Q(),Fe=X(),rs=(u,e,t,s,n,r,f,i,d,c,a)=>{let o=new Map,h=new Map,g=[],l=[],_=[],S=-2,A=[],y=[],b=[],M=[],w=[],p=[],O=[],E=(T,v)=>{if(T>O.length)return-1;let{mappingsData:z}=O[T-1],m=0,B=z.length/5;for(;m<B;){let N=m+B>>1;z[N*5]<=v?m=N+1:B=N}return m===0?-1:m-1};return Ue(u,e,(T,v,z,m,B,N,q)=>{if(m===S){let L=E(B,N);if(L!==-1){let{chunks:H,mappingsData:k}=O[B-1],R=L*5,C=k[R+1],I=k[R+2],F=k[R+3],U=k[R+4];if(C>=0){let vt=H[L],bt=k[R],Z=N-bt;if(Z>0){let x=C<M.length?M[C]:null;if(x===void 0){let D=b[C];x=D?Fe(D):null,M[C]=x}if(x!==null){let D=I<=x.length?x[I-1].slice(F,F+Z):"";vt.slice(0,Z)===D&&(F+=Z,U=-1)}}let ee=C<A.length?A[C]:-2;if(ee===-2){let[x,D]=C<y.length?y[C]:[null,void 0],J=o.get(x);J===void 0&&(o.set(x,J=o.size),i(J,x,D)),ee=J,A[C]=ee}let G=-1;if(U>=0){if(G=U<w.length?w[U]:-2,G===-2){let x=U<p.length?p[U]:void 0;if(x){let D=h.get(x);D===void 0&&(h.set(x,D=h.size),d(D,x)),G=D}else G=-1;w[U]=G}}else if(q>=0){let x=M[C];if(x===void 0){let D=b[C];x=D?Fe(D):null,M[C]=x}if(x!==null){let D=_[q],J=I<=x.length?x[I-1].slice(F,F+D.length):"";if(D===J&&(G=q<l.length?l[q]:-2,G===-2)){let te=_[q];if(te){let se=h.get(te);se===void 0&&(h.set(te,se=h.size),d(se,te)),G=se}else G=-1;l[q]=G}}}f(T,v,z,ee,I,F,G);return}}if(r){f(T,v,z,-1,-1,-1,-1);return}else if(g[m]===-2){let H=o.get(t);H===void 0&&(o.set(u,H=o.size),i(H,t,s)),g[m]=H}}let P=m<0||m>=g.length?-1:g[m];if(P<0)f(T,v,z,-1,-1,-1,-1);else{let L=-1;if(q>=0&&q<l.length&&(L=l[q],L===-2)){let H=_[q],k=h.get(H);k===void 0&&(h.set(H,k=h.size),d(k,H)),L=k,l[q]=L}f(T,v,z,P,B,N,L)}},(T,v,z)=>{if(v===t)S=T,s!==void 0?z=s:s=z,g[T]=-2,Ue(z,n,(m,B,N,q,P,L,H)=>{for(;O.length<B;)O.push({mappingsData:[],chunks:[]});let k=O[B-1];k.mappingsData.push(N,q,P,L,H),k.chunks.push(m)},(m,B,N)=>{b[m]=N,M[m]=void 0,A[m]=-2,y[m]=[B,N]},(m,B)=>{w[m]=-2,p[m]=B},!1,a);else{let m=o.get(v);m===void 0&&(o.set(v,m=o.size),i(m,v,z)),g[T]=m}},(T,v)=>{l[T]=-2,_[T]=v},c,a)};Je.exports=rs});var Ke=j((sr,$e)=>{"use strict";var ns=V(),is=Q(),us=Xe(),{getMap:fs,getSourceAndMap:cs}=$(),_e=class extends ns{constructor(e,t,s,n,r,f){super();let i=Buffer.isBuffer(e);this._valueAsString=i?void 0:e,this._valueAsBuffer=i?e:void 0,this._name=t,this._hasSourceMap=!!s;let d=Buffer.isBuffer(s),c=typeof s=="string";this._sourceMapAsObject=d||c?void 0:s,this._sourceMapAsString=c?s:void 0,this._sourceMapAsBuffer=d?s:void 0,this._hasOriginalSource=!!n;let a=Buffer.isBuffer(n);this._originalSourceAsString=a?void 0:n,this._originalSourceAsBuffer=a?n:void 0,this._hasInnerSourceMap=!!r;let o=Buffer.isBuffer(r),h=typeof r=="string";this._innerSourceMapAsObject=o||h?void 0:r,this._innerSourceMapAsString=h?r:void 0,this._innerSourceMapAsBuffer=o?r:void 0,this._removeOriginalSource=f}_ensureValueBuffer(){this._valueAsBuffer===void 0&&(this._valueAsBuffer=Buffer.from(this._valueAsString,"utf-8"))}_ensureValueString(){this._valueAsString===void 0&&(this._valueAsString=this._valueAsBuffer.toString("utf-8"))}_ensureOriginalSourceBuffer(){this._originalSourceAsBuffer===void 0&&this._hasOriginalSource&&(this._originalSourceAsBuffer=Buffer.from(this._originalSourceAsString,"utf-8"))}_ensureOriginalSourceString(){this._originalSourceAsString===void 0&&this._hasOriginalSource&&(this._originalSourceAsString=this._originalSourceAsBuffer.toString("utf-8"))}_ensureInnerSourceMapObject(){this._innerSourceMapAsObject===void 0&&this._hasInnerSourceMap&&(this._ensureInnerSourceMapString(),this._innerSourceMapAsObject=JSON.parse(this._innerSourceMapAsString))}_ensureInnerSourceMapBuffer(){this._innerSourceMapAsBuffer===void 0&&this._hasInnerSourceMap&&(this._ensureInnerSourceMapString(),this._innerSourceMapAsBuffer=Buffer.from(this._innerSourceMapAsString,"utf-8"))}_ensureInnerSourceMapString(){this._innerSourceMapAsString===void 0&&this._hasInnerSourceMap&&(this._innerSourceMapAsBuffer!==void 0?this._innerSourceMapAsString=this._innerSourceMapAsBuffer.toString("utf-8"):this._innerSourceMapAsString=JSON.stringify(this._innerSourceMapAsObject))}_ensureSourceMapObject(){this._sourceMapAsObject===void 0&&(this._ensureSourceMapString(),this._sourceMapAsObject=JSON.parse(this._sourceMapAsString))}_ensureSourceMapBuffer(){this._sourceMapAsBuffer===void 0&&(this._ensureSourceMapString(),this._sourceMapAsBuffer=Buffer.from(this._sourceMapAsString,"utf-8"))}_ensureSourceMapString(){this._sourceMapAsString===void 0&&(this._sourceMapAsBuffer!==void 0?this._sourceMapAsString=this._sourceMapAsBuffer.toString("utf-8"):this._sourceMapAsString=JSON.stringify(this._sourceMapAsObject))}getArgsAsBuffers(){return this._ensureValueBuffer(),this._ensureSourceMapBuffer(),this._ensureOriginalSourceBuffer(),this._ensureInnerSourceMapBuffer(),[this._valueAsBuffer,this._name,this._sourceMapAsBuffer,this._originalSourceAsBuffer,this._innerSourceMapAsBuffer,this._removeOriginalSource]}buffer(){return this._ensureValueBuffer(),this._valueAsBuffer}source(){return this._ensureValueString(),this._valueAsString}map(e){return this._hasInnerSourceMap?fs(this,e):(this._ensureSourceMapObject(),this._sourceMapAsObject)}sourceAndMap(e){return this._hasInnerSourceMap?cs(this,e):(this._ensureValueString(),this._ensureSourceMapObject(),{source:this._valueAsString,map:this._sourceMapAsObject})}streamChunks(e,t,s,n){return this._ensureValueString(),this._ensureSourceMapObject(),this._ensureOriginalSourceString(),this._hasInnerSourceMap?(this._ensureInnerSourceMapObject(),us(this._valueAsString,this._sourceMapAsObject,this._name,this._originalSourceAsString,this._innerSourceMapAsObject,this._removeOriginalSource,t,s,n,!!(e&&e.finalSource),!!(e&&e.columns!==!1))):is(this._valueAsString,this._sourceMapAsObject,t,s,n,!!(e&&e.finalSource),!!(e&&e.columns!==!1))}updateHash(e){this._ensureValueBuffer(),this._ensureSourceMapBuffer(),this._ensureOriginalSourceBuffer(),this._ensureInnerSourceMapBuffer(),e.update("SourceMapSource"),e.update(this._valueAsBuffer),e.update(this._sourceMapAsBuffer),this._hasOriginalSource&&e.update(this._originalSourceAsBuffer),this._hasInnerSourceMap&&e.update(this._innerSourceMapAsBuffer),e.update(this._removeOriginalSource?"true":"false")}};$e.exports=_e});var Y=j((rr,Qe)=>{"use strict";var os=ne(),ls=Q();Qe.exports=(u,e,t,s,n)=>{if(typeof u.streamChunks=="function")return u.streamChunks(e,t,s,n);{let r=u.sourceAndMap(e);return r.map?ls(r.source,r.map,t,s,n,!!(e&&e.finalSource),!!(e&&e.columns!==!1)):os(r.source,t,s,n,!!(e&&e.finalSource))}}});var Ze=j((nr,Ye)=>{"use strict";var as=he(),hs=Y(),ds=(u,e,t,s,n)=>{let r="",f="",i=[],d=[],c=[],a=as(Object.assign({},e,{columns:!0})),o=!!(e&&e.finalSource),{generatedLine:h,generatedColumn:g,source:l}=hs(u,e,(S,A,y,b,M,w,p)=>(S!==void 0&&(r+=S),f+=a(A,y,b,M,w,p),t(o?void 0:S,A,y,b,M,w,p)),(S,A,y)=>{for(;i.length<S;)i.push(null);if(i[S]=A,y!==void 0){for(;d.length<S;)d.push(null);d[S]=y}return s(S,A,y)},(S,A)=>{for(;c.length<S;)c.push(null);return c[S]=A,n(S,A)}),_=l!==void 0?l:r;return{result:{generatedLine:h,generatedColumn:g,source:o?_:void 0},source:_,map:f.length>0?{version:3,file:"x",mappings:f,sources:i,sourcesContent:d.length>0?d:void 0,names:c}:null}};Ye.exports=ds});var tt=j((ir,et)=>{"use strict";var ps=V(),_s=Q(),gs=ne(),Ss=Ze(),ms=u=>{if(typeof u!="object"||!u)return u;let e=Object.assign({},u);return u.mappings&&(e.mappings=Buffer.from(u.mappings,"utf-8")),u.sourcesContent&&(e.sourcesContent=u.sourcesContent.map(t=>t&&Buffer.from(t,"utf-8"))),e},As=u=>{if(typeof u!="object"||!u)return u;let e=Object.assign({},u);return u.mappings&&(e.mappings=u.mappings.toString("utf-8")),u.sourcesContent&&(e.sourcesContent=u.sourcesContent.map(t=>t&&t.toString("utf-8"))),e},ge=class extends ps{constructor(e,t){super(),this._source=e,this._cachedSourceType=t?t.source:void 0,this._cachedSource=void 0,this._cachedBuffer=t?t.buffer:void 0,this._cachedSize=t?t.size:void 0,this._cachedMaps=t?t.maps:new Map,this._cachedHashUpdate=t?t.hash:void 0}getCachedData(){let e=new Map;for(let t of this._cachedMaps){let s=t[1];s.bufferedMap===void 0&&(s.bufferedMap=ms(this._getMapFromCacheEntry(s))),e.set(t[0],{map:void 0,bufferedMap:s.bufferedMap})}return this._cachedSource&&this.buffer(),{buffer:this._cachedBuffer,source:this._cachedSourceType!==void 0?this._cachedSourceType:typeof this._cachedSource=="string"?!0:Buffer.isBuffer(this._cachedSource)?!1:void 0,size:this._cachedSize,maps:e,hash:this._cachedHashUpdate}}originalLazy(){return this._source}original(){return typeof this._source=="function"&&(this._source=this._source()),this._source}source(){let e=this._getCachedSource();return e!==void 0?e:this._cachedSource=this.original().source()}_getMapFromCacheEntry(e){if(e.map!==void 0)return e.map;if(e.bufferedMap!==void 0)return e.map=As(e.bufferedMap)}_getCachedSource(){if(this._cachedSource!==void 0)return this._cachedSource;if(this._cachedBuffer&&this._cachedSourceType!==void 0)return this._cachedSource=this._cachedSourceType?this._cachedBuffer.toString("utf-8"):this._cachedBuffer}buffer(){if(this._cachedBuffer!==void 0)return this._cachedBuffer;if(this._cachedSource!==void 0)return Buffer.isBuffer(this._cachedSource)?this._cachedBuffer=this._cachedSource:this._cachedBuffer=Buffer.from(this._cachedSource,"utf-8");if(typeof this.original().buffer=="function")return this._cachedBuffer=this.original().buffer();let e=this.source();return Buffer.isBuffer(e)?this._cachedBuffer=e:this._cachedBuffer=Buffer.from(e,"utf-8")}size(){if(this._cachedSize!==void 0)return this._cachedSize;if(this._cachedBuffer!==void 0)return this._cachedSize=this._cachedBuffer.length;let e=this._getCachedSource();return e!==void 0?this._cachedSize=Buffer.byteLength(e):this._cachedSize=this.original().size()}sourceAndMap(e){let t=e?JSON.stringify(e):"{}",s=this._cachedMaps.get(t);if(s!==void 0){let f=this._getMapFromCacheEntry(s);return{source:this.source(),map:f}}let n=this._getCachedSource(),r;if(n!==void 0)r=this.original().map(e);else{let f=this.original().sourceAndMap(e);n=f.source,r=f.map,this._cachedSource=n}return this._cachedMaps.set(t,{map:r,bufferedMap:void 0}),{source:n,map:r}}streamChunks(e,t,s,n){let r=e?JSON.stringify(e):"{}";if(this._cachedMaps.has(r)&&(this._cachedBuffer!==void 0||this._cachedSource!==void 0)){let{source:c,map:a}=this.sourceAndMap(e);return a?_s(c,a,t,s,n,!!(e&&e.finalSource),!0):gs(c,t,s,n,!!(e&&e.finalSource))}let{result:f,source:i,map:d}=Ss(this.original(),e,t,s,n);return this._cachedSource=i,this._cachedMaps.set(r,{map:d,bufferedMap:void 0}),f}map(e){let t=e?JSON.stringify(e):"{}",s=this._cachedMaps.get(t);if(s!==void 0)return this._getMapFromCacheEntry(s);let n=this.original().map(e);return this._cachedMaps.set(t,{map:n,bufferedMap:void 0}),n}updateHash(e){if(this._cachedHashUpdate!==void 0){for(let r of this._cachedHashUpdate)e.update(r);return}let t=[],s,n={update:r=>{typeof r=="string"&&r.length<10240?s===void 0?s=r:(s+=r,s.length>102400&&(t.push(Buffer.from(s)),s=void 0)):(s!==void 0&&(t.push(Buffer.from(s)),s=void 0),t.push(r))}};this.original().updateHash(n),s!==void 0&&t.push(Buffer.from(s));for(let r of t)e.update(r);this._cachedHashUpdate=t}};et.exports=ge});var nt=j((ur,rt)=>{"use strict";var Ms=V(),st=ie(),Bs=Y(),{getMap:Os,getSourceAndMap:vs}=$(),Se=new WeakSet,me=class u extends Ms{constructor(){super(),this._children=[];for(let e=0;e<arguments.length;e++){let t=arguments[e];if(t instanceof u)for(let s of t._children)this._children.push(s);else this._children.push(t)}this._isOptimized=arguments.length===0}getChildren(){return this._isOptimized||this._optimize(),this._children}add(e){if(e instanceof u)for(let t of e._children)this._children.push(t);else this._children.push(e);this._isOptimized=!1}addAllSkipOptimizing(e){for(let t of e)this._children.push(t)}buffer(){this._isOptimized||this._optimize();let e=[];for(let t of this._children)if(typeof t.buffer=="function")e.push(t.buffer());else{let s=t.source();Buffer.isBuffer(s)?e.push(s):e.push(Buffer.from(s,"utf-8"))}return Buffer.concat(e)}source(){this._isOptimized||this._optimize();let e="";for(let t of this._children)e+=t.source();return e}size(){this._isOptimized||this._optimize();let e=0;for(let t of this._children)e+=t.size();return e}map(e){return Os(this,e)}sourceAndMap(e){return vs(this,e)}streamChunks(e,t,s,n){if(this._isOptimized||this._optimize(),this._children.length===1)return this._children[0].streamChunks(e,t,s,n);let r=0,f=0,i=new Map,d=new Map,c=!!(e&&e.finalSource),a="",o=!1;for(let h of this._children){let g=[],l=[],_=0,{generatedLine:S,generatedColumn:A,source:y}=Bs(h,e,(b,M,w,p,O,E,T)=>{let v=M+r,z=M===1?w+f:w;o&&((M!==1||w!==0)&&t(void 0,r+1,f,-1,-1,-1,-1),o=!1);let m=p<0||p>=g.length?-1:g[p],B=T<0||T>=l.length?-1:l[T];_=m<0?0:M,c?(b!==void 0&&(a+=b),m>=0&&t(void 0,v,z,m,O,E,B)):m<0?t(b,v,z,-1,-1,-1,-1):t(b,v,z,m,O,E,B)},(b,M,w)=>{let p=i.get(M);p===void 0&&(i.set(M,p=i.size),s(p,M,w)),g[b]=p},(b,M)=>{let w=d.get(M);w===void 0&&(d.set(M,w=d.size),n(w,M)),l[b]=w});y!==void 0&&(a+=y),o&&(S!==1||A!==0)&&(t(void 0,r+1,f,-1,-1,-1,-1),o=!1),S>1?f=A:f+=A,o=o||c&&_===S,r+=S-1}return{generatedLine:r+1,generatedColumn:f,source:c?a:void 0}}updateHash(e){this._isOptimized||this._optimize(),e.update("ConcatSource");for(let t of this._children)t.updateHash(e)}_optimize(){let e=[],t,s,n=i=>{s===void 0?s=i:Array.isArray(s)?s.push(i):s=[typeof s=="string"?s:s.source(),i]},r=i=>{s===void 0?s=i:Array.isArray(s)?s.push(i.source()):s=[typeof s=="string"?s:s.source(),i.source()]},f=()=>{if(Array.isArray(s)){let i=new st(s.join(""));Se.add(i),e.push(i)}else if(typeof s=="string"){let i=new st(s);Se.add(i),e.push(i)}else e.push(s)};for(let i of this._children)typeof i=="string"?t===void 0?t=i:t+=i:(t!==void 0&&(n(t),t=void 0),Se.has(i)?r(i):(s!==void 0&&(f(),s=void 0),e.push(i)));t!==void 0&&n(t),s!==void 0&&f(),this._children=e,this._isOptimized=!0}};rt.exports=me});var ct=j((fr,ft)=>{"use strict";var{getMap:bs,getSourceAndMap:ys}=$(),ws=Y(),Ts=V(),Ae=X(),ut=typeof process=="object"&&process.versions&&typeof process.versions.v8=="string"&&!/^[0-6]\./.test(process.versions.v8),it=536870912,oe=class{constructor(e,t,s,n){this.start=e,this.end=t,this.content=s,this.name=n,ut||(this.index=-1)}},Me=class extends Ts{constructor(e,t){super(),this._source=e,this._name=t,this._replacements=[],this._isSorted=!0}getName(){return this._name}getReplacements(){return this._sortReplacements(),this._replacements}replace(e,t,s,n){if(typeof s!="string")throw new Error("insertion must be a string, but is a "+typeof s);this._replacements.push(new oe(e,t,s,n)),this._isSorted=!1}insert(e,t,s){if(typeof t!="string")throw new Error("insertion must be a string, but is a "+typeof t+": "+t);this._replacements.push(new oe(e,e-1,t,s)),this._isSorted=!1}source(){if(this._replacements.length===0)return this._source.source();let e=this._source.source(),t=0,s=[];this._sortReplacements();for(let n of this._replacements){let r=Math.floor(n.start),f=Math.floor(n.end+1);if(t<r){let i=r-t;s.push(e.slice(0,i)),e=e.slice(i),t=r}if(s.push(n.content),t<f){let i=f-t;e=e.slice(i),t=f}}return s.push(e),s.join("")}map(e){return this._replacements.length===0?this._source.map(e):bs(this,e)}sourceAndMap(e){return this._replacements.length===0?this._source.sourceAndMap(e):ys(this,e)}original(){return this._source}_sortReplacements(){this._isSorted||(ut?this._replacements.sort(function(e,t){let s=e.start-t.start;if(s!==0)return s;let n=e.end-t.end;return n!==0?n:0}):(this._replacements.forEach((e,t)=>e.index=t),this._replacements.sort(function(e,t){let s=e.start-t.start;if(s!==0)return s;let n=e.end-t.end;return n!==0?n:e.index-t.index})),this._isSorted=!0)}streamChunks(e,t,s,n){this._sortReplacements();let r=this._replacements,f=0,i=0,d=-1,c=i<r.length?Math.floor(r[i].start):it,a=0,o=0,h=0,g=[],l=new Map,_=[],S=(p,O,E,T)=>{let v=p<g.length?g[p]:void 0;if(v===void 0)return!1;typeof v=="string"&&(v=Ae(v),g[p]=v);let z=O<=v.length?v[O-1]:null;return z===null?!1:z.slice(E,E+T.length)===T},{generatedLine:A,generatedColumn:y}=ws(this._source,Object.assign({},e,{finalSource:!1}),(p,O,E,T,v,z,m)=>{let B=0,N=f+p.length;if(d>f){if(d>=N){let P=O+a;p.endsWith(`
`)?(a--,h===P&&(o+=E)):h===P?o-=p.length:(o=-p.length,h=P),f=N;return}B=d-f,S(T,v,z,p.slice(0,B))&&(z+=B),f+=B;let q=O+a;h===q?o-=B:(o=-B,h=q),E+=B}if(c<N)do{let q=O+a;if(c>f){let C=c-f,I=p.slice(B,B+C);t(I,q,E+(q===h?o:0),T,v,z,m<0||m>=_.length?-1:_[m]),E+=C,B+=C,f=c,S(T,v,z,I)&&(z+=I.length)}let{content:P,name:L}=r[i],H=Ae(P),k=m;if(T>=0&&L){let C=l.get(L);C===void 0&&(C=l.size,l.set(L,C),n(C,L)),k=C}for(let C=0;C<H.length;C++){let I=H[C];t(I,q,E+(q===h?o:0),T,v,z,k),k=-1,C===H.length-1&&!I.endsWith(`
`)?h===q?o+=I.length:(o=I.length,h=q):(a++,q++,o=-E,h=q)}d=Math.max(d,Math.floor(r[i].end+1)),i++,c=i<r.length?Math.floor(r[i].start):it;let R=p.length-N+d-B;if(R>0){if(d>=N){let I=O+a;p.endsWith(`
`)?(a--,h===I&&(o+=E)):h===I?o-=p.length-B:(o=B-p.length,h=I),f=N;return}let C=O+a;S(T,v,z,p.slice(B,B+R))&&(z+=R),B+=R,f+=R,h===C?o-=R:(o=-R,h=C),E+=R}}while(c<N);if(B<p.length){let q=B===0?p:p.slice(B),P=O+a;t(q,P,E+(P===h?o:0),T,v,z,m<0?-1:_[m])}f=N},(p,O,E)=>{for(;g.length<p;)g.push(void 0);g[p]=E,s(p,O,E)},(p,O)=>{let E=l.get(O);E===void 0&&(E=l.size,l.set(O,E),n(E,O)),_[p]=E}),b="";for(;i<r.length;i++)b+=r[i].content;let M=A+a,w=Ae(b);for(let p=0;p<w.length;p++){let O=w[p];t(O,M,y+(M===h?o:0),-1,-1,-1,-1),p===w.length-1&&!O.endsWith(`
`)?h===M?o+=O.length:(o=O.length,h=M):(a++,M++,o=-y,h=M)}return{generatedLine:M,generatedColumn:y+(M===h?o:0)}}updateHash(e){this._sortReplacements(),e.update("ReplaceSource"),this._source.updateHash(e),e.update(this._name||"");for(let t of this._replacements)e.update(`${t.start}${t.end}${t.content}${t.name}`)}};ft.exports=Me});var at=j((cr,lt)=>{"use strict";var zs=V(),Cs=ie(),qs=Y(),{getMap:Es,getSourceAndMap:Ns}=$(),ot=/\n(?=.|\s)/g,Be=class extends zs{constructor(e,t){super(),this._source=typeof t=="string"||Buffer.isBuffer(t)?new Cs(t,!0):t,this._prefix=e}getPrefix(){return this._prefix}original(){return this._source}source(){let e=this._source.source(),t=this._prefix;return t+e.replace(ot,`
`+t)}map(e){return Es(this,e)}sourceAndMap(e){return Ns(this,e)}streamChunks(e,t,s,n){let r=this._prefix,f=r.length,i=!!(e&&e.columns===!1),{generatedLine:d,generatedColumn:c,source:a}=qs(this._source,e,(o,h,g,l,_,S,A)=>{g!==0?g+=f:o!==void 0?i||l<0?o=r+o:f>0&&(t(r,h,g,-1,-1,-1,-1),g+=f):i||(g+=f),t(o,h,g,l,_,S,A)},s,n);return{generatedLine:d,generatedColumn:c===0?0:f+c,source:a!==void 0?r+a.replace(ot,`
`+r):void 0}}updateHash(e){e.update("PrefixSource"),this._source.updateHash(e),e.update(this._prefix)}};lt.exports=Be});var dt=j((or,ht)=>{"use strict";var js=V(),Oe=class extends js{constructor(e){super(),this._size=e}_error(){return new Error("Content and Map of this Source is not available (only size() is supported)")}size(){return this._size}source(){throw this._error()}buffer(){throw this._error()}map(e){throw this._error()}updateHash(){throw this._error()}};ht.exports=Oe});var gt=j((lr,_t)=>{"use strict";var pt=V(),ve=class u extends pt{static from(e){return e instanceof pt?e:new u(e)}constructor(e){super(),this._sourceLike=e}source(){return this._sourceLike.source()}buffer(){return typeof this._sourceLike.buffer=="function"?this._sourceLike.buffer():super.buffer()}size(){return typeof this._sourceLike.size=="function"?this._sourceLike.size():super.size()}map(e){return typeof this._sourceLike.map=="function"?this._sourceLike.map(e):super.map(e)}sourceAndMap(e){return typeof this._sourceLike.sourceAndMap=="function"?this._sourceLike.sourceAndMap(e):super.sourceAndMap(e)}updateHash(e){if(typeof this._sourceLike.updateHash=="function")return this._sourceLike.updateHash(e);if(typeof this._sourceLike.map=="function")throw new Error("A Source-like object with a 'map' method must also provide an 'updateHash' method");e.update(this.buffer())}};_t.exports=ve});var mt=j(St=>{var W=(u,e)=>{let t;Object.defineProperty(St,u,{get:()=>(e!==void 0&&(t=e(),e=void 0),t),configurable:!0})};W("Source",()=>V());W("RawSource",()=>ie());W("OriginalSource",()=>ke());W("SourceMapSource",()=>Ke());W("CachedSource",()=>tt());W("ConcatSource",()=>nt());W("ReplaceSource",()=>ct());W("PrefixSource",()=>at());W("SizeOnlySource",()=>dt());W("CompatSource",()=>gt())});var Ot=Et(mt(),1);import{basename as xs,join as Is}from"path";import{existsSync as ks,readFileSync as Ds,writeFileSync as At}from"fs";import{hostname as Ls}from"os";import{createDevTools as Hs}from"../core/index.mjs";import{createDevToolsNodeSys as Rs}from"../node/index.mjs";import{createDevToolsServer as Ps}from"../server/index.mjs";var Mt="BuilderDevToolsPlugin",Bt=class{constructor(e){this.opts=e||{}}apply(e){if(this.opts.enabled==null&&(this.opts.enabled=process.env.NODE_ENV!=="production"),this.opts.enabled===!1)return;let t=e,s=t.webpack.Compilation.PROCESS_ASSETS_STAGE_ADDITIONS,n=new WeakMap,r=null,f=null,i=null,d=async()=>(r||(r=await Rs({getRootDir:()=>t.context})),f||(f=await Hs(r)),i||(i=await Ps({...f,getClientId:()=>"webpack-builder-dev-tools",getLocalHostname:()=>r.hash(Ls()),closeAppServer:async()=>{},restartAppServer:async()=>{r.debug("restart server");let c=["next.config.js","next.config.ts","webpack.config.js","webpack.config.ts"].map(a=>Is(t.context,a));for(let a of c)if(ks(a)){let o=Ds(a,"utf-8"),h=o+`
// trigger rebuild ${Date.now()}`;At(a,h),At(a,o),await new Promise(g=>setTimeout(g,50));return}},enableAppWatch:async c=>c,...r,...this.opts})),i);t.hooks.compilation.tap(Mt,c=>{c.hooks.processAssets.tapAsync({name:Mt,stage:s},async(a,o)=>{for(let h of c.chunks)for(let g of h.files){if(xs(g)!=="webpack.js")continue;let _=await d(),S={chunk:h,filename:g},A=_.getClientInjectScript(),y=c.getPath(A,S);c.updateAsset(g,b=>{let M=n.get(b);if(!M||M.inject!==y){let w=new Ot.ConcatSource(b,y);return n.set(b,{source:w,inject:y}),w}return M.source})}o()})})}};export{Bt as BuilderDevToolsPlugin};
